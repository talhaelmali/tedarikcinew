import{g as q,G as z,r as d,D as A,J as j,F as v,h as N,K as G,j as e}from"./index-D8FzNVl7.js";import{B as J}from"./BuyerAdCard-BVMjWs0B.js";import{d as w}from"./dayjs.min-5X-_7qHF.js";import{F as K,a as T}from"./ArrowLongRightIcon-CEwQ3B_q.js";import"./duration-3l_rJDXj.js";import"./EditAdModal-BeYLijlG.js";import"./index-BfQpAw_w.js";import"./react-select.esm--rFHnHRR.js";const S=q(),ee=()=>{const{company:o,loading:x}=z(),[C,k]=d.useState([]),[D,p]=d.useState(!0),[c,E]=d.useState(""),[f,F]=d.useState(""),[r,g]=d.useState(1),[i]=d.useState(3),[u,P]=d.useState(0);d.useEffect(()=>{if(o&&!x){const t=L();return()=>t()}},[o,c,r,x]);const L=()=>{p(!0);const t=c?A(N(S,"companies",o.id,"ads"),v("title",">=",c),v("title","<=",c+""),j("title")):A(N(S,"companies",o.id,"ads"),j("createdAt","desc"));return G(t,s=>{let n=[];s.forEach(m=>{const a=m.data();a.createdAt&&a.createdAt.toDate&&(a.createdAt=a.createdAt.toDate());const M=B(a.createdAt,a.duration);I(M)&&a.status!=="approved"&&n.push({id:m.id,...a,companyId:o.id})}),n.sort((m,a)=>a.createdAt-m.createdAt),P(n.length);const b=r*i,Q=b-i,R=n.slice(Q,b);k(R),p(!1)})},B=(t,s)=>{if(!t||!s)return null;const n=new Date(t);return n.setDate(n.getDate()+parseInt(s,10)),n},I=t=>t&&w(t).isAfter(w()),h=t=>{g(t)},O=()=>{E(f),g(1)},y=r*i,$=y-i,l=Math.ceil(u/i);return D||x?e.jsx("div",{children:"Loading..."}):e.jsxs("div",{className:"max-w-4xl mx-auto mb-20",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"text",placeholder:"İlan Ara...",className:"flex-grow p-2 border border-gray-300 rounded-l-md",value:f,onChange:t=>F(t.target.value)}),e.jsx("button",{onClick:O,className:"p-2 bg-blue-600 text-white rounded-r-md",children:"Ara"})]}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:[u," ilan arasından ",$+1," - ",Math.min(y,u)," gösteriliyor"]}),e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"En Son Eklenen İlanlar"}),e.jsx("p",{className:"text-sm text-gray-500",children:"İlanlar arasından seçip sürece devam edebilirsiniz."}),e.jsx("ul",{role:"list",className:"divide-y divide-gray-200 mt-4",children:C.map(t=>e.jsx(J,{ad:t},t.id))}),l>1&&e.jsxs("nav",{className:"flex items-center justify-between border-t border-gray-200 px-4 sm:px-0 mt-4",children:[e.jsx("div",{className:"-mt-px flex w-0 flex-1",children:e.jsxs("button",{onClick:()=>h(r-1),className:`inline-flex items-center border-t-2 border-transparent pr-1 pt-4 text-sm font-medium ${r===1?"text-gray-300 cursor-not-allowed":"text-gray-500 hover:border-gray-300 hover:text-gray-700"}`,disabled:r===1,children:[e.jsx(K,{className:"mr-3 h-5 w-5 text-gray-400","aria-hidden":"true"}),"Önceki"]})}),e.jsx("div",{className:"hidden md:-mt-px md:flex",children:Array.from({length:l},(t,s)=>e.jsx("button",{onClick:()=>h(s+1),className:`inline-flex items-center border-t-2 px-4 pt-4 text-sm font-medium ${r===s+1?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"}`,children:s+1},s))}),e.jsx("div",{className:"-mt-px flex w-0 flex-1 justify-end",children:e.jsxs("button",{onClick:()=>h(r+1),className:`inline-flex items-center border-t-2 border-transparent pl-1 pt-4 text-sm font-medium ${r===l?"text-gray-300 cursor-not-allowed":"text-gray-500 hover:border-gray-300 hover:text-gray-700"}`,disabled:r===l,children:["Sonraki",e.jsx(T,{className:"ml-3 h-5 w-5 text-gray-400","aria-hidden":"true"})]})})]})]})};export{ee as default};
