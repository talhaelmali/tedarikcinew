import{G as k,r as m,u as E,j as e,az as c,f as M,d as C,I as S}from"./index-D8FzNVl7.js";import{s as i}from"./sweetalert.min-B7OZHrdE.js";const T="https://us-central1-functions-test-87bf0.cloudfunctions.net/app";function P(){const{company:l,loading:d}=k(),[u,x]=m.useState([]),[y,h]=m.useState(!1),[r,g]=m.useState({name:"",email:"",password:"",role:"",phone:""}),j="profilepic.svg",b=E();m.useEffect(()=>{!d&&!l?i("Şirket bulunamadı","Bu kullanıcı ile ilişkilendirilmiş bir şirket bulunamadı.","error").then(()=>{b("/dashboard")}):l&&(async()=>{try{const a=Array.isArray(l.teamMembers)?l.teamMembers:[],t=[];for(const o of a){const f=await M(C(S,"users",o.userId));if(f.exists()){const v=f.data();t.push({...v,role:o.role})}}x(t)}catch(a){console.error("Ekip üyeleri alınırken hata oluştu: ",a),i("Hata",a.message,"error")}})()},[l,d,b]);const N=()=>{h(!0)},p=()=>{h(!1)},n=s=>{const{name:a,value:t}=s.target;g(o=>({...o,[a]:t}))},w=async s=>{s.preventDefault();try{const t=await(await fetch(`${T}/addTeamMember`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...r,companyId:l.id})})).json();t.success?(i("Başarılı!","Ekip üyesi başarıyla eklendi.","success"),p(),x(o=>[...o,t.user])):i("Hata",t.message,"error")}catch(a){console.error("Error adding team member:",a),i("Hata","Ekip üyesi eklenirken bir hata oluştu.","error")}};return d?e.jsx("div",{children:"Yükleniyor..."}):e.jsxs("div",{className:"",children:[e.jsxs("nav",{className:"flex border-b border-gray-200 mb-6",children:[e.jsx(c,{to:"/profile",className:({isActive:s})=>s?"text-blue-800 border-b-2 border-blue-800 py-2 px-4":"text-gray-600 py-2 px-4 hover:text-blue-600",children:"Profil"}),e.jsx(c,{to:"/my-company",className:({isActive:s})=>s?"text-blue-800 border-b-2 border-blue-800 py-2 px-4":"text-gray-600 py-2 px-4 hover:text-blue-600",children:"Firma Bilgileri"}),e.jsx(c,{to:"/teammembers",className:({isActive:s})=>s?"text-blue-800 border-b-2 border-blue-800 py-2 px-4":"text-gray-600 py-2 px-4 hover:text-blue-600",children:"Ekip Üyeleri"})]}),e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Ekip Üyeleri"}),e.jsx("div",{className:"space-y-4",children:u.length>0?u.map((s,a)=>e.jsxs("div",{className:"flex items-center p-4 border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{className:"h-12 w-12 rounded-full",src:j,alt:"Profile"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s.fullName}),e.jsx("p",{className:"text-sm text-gray-600",children:s.role})]}),e.jsxs("div",{className:"ml-auto text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:s.email}),e.jsx("p",{className:"text-sm text-gray-600",children:s.phone})]})]},a)):e.jsx("p",{className:"text-gray-600",children:"Henüz ekip üyesi eklemediniz."})}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{type:"button",className:"py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-opacity-75",onClick:N,children:"Ekip Üyesi Ekle"})}),y&&e.jsx("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),e.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:align-middle sm:max-w-lg sm:w-full",children:e.jsxs("div",{className:"bg-white px-6 py-5 sm:px-10 sm:py-8",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-5",id:"modal-title",children:"Ekip Üyesi Ekle"}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Ad Soyad"}),e.jsx("input",{type:"text",name:"name",id:"name",className:"mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",value:r.name,onChange:n})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700",children:"Mesleği"}),e.jsx("input",{type:"text",name:"role",id:"role",className:"mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",value:r.role,onChange:n})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Telefon Numarası"}),e.jsx("input",{type:"text",name:"phone",id:"phone",className:"mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",value:r.phone,onChange:n})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"E-Posta"}),e.jsx("input",{type:"email",name:"email",id:"email",className:"mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",value:r.email,onChange:n}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Kurumsal e-posta adresini giriniz."})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Şifre"}),e.jsx("input",{type:"password",name:"password",id:"password",className:"mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",value:r.password,onChange:n})]}),e.jsxs("div",{className:"bg-gray-50 px-6 py-3 sm:px-10 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{type:"submit",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Ekle"}),e.jsx("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 sm:mt-0 sm:w-auto sm:text-sm",onClick:p,children:"Vazgeç"})]})]})]})})]})})]})}export{P as default};
