import{r as a,j as e,d as y,I as j,f as L,a as R,s as S,b as I,c as U,e as E,S as k}from"./index-Pf0wcubd.js";function D({title:i,titleId:o,...d},c){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":o},d),i?a.createElement("title",{id:o},i):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}const $=a.forwardRef(D),A=({order:i,closeModal:o})=>{const[d,c]=a.useState(""),[g,x]=a.useState(""),[m,h]=a.useState([]),[f,w]=a.useState([]),[u,b]=a.useState(!1),[n,p]=a.useState(!1);a.useEffect(()=>{(async()=>{try{const s=y(j,"orders",i.id,"logistics",i.id),r=await L(s);if(r.exists()){const l=r.data();c(l.logisticsCompany||""),x(l.trackingCode||""),w(l.images||[]),p(!0)}else p(!1)}catch(s){console.error("Lojistik verileri alınırken hata oluştu:",s)}})()},[i.id]);const v=t=>{const s=Array.from(t.target.files);h(r=>[...r,...s])},N=t=>{h(s=>s.filter((r,l)=>l!==t))},C=async()=>{if(!n){b(!0);try{const t=await Promise.all(m.map(async r=>{const l=R(S,`order-images/${i.id}/${r.name}`);return await I(l,r),await U(l)})),s=y(j,"orders",i.id,"logistics",i.id);await E(s,{logisticsCompany:d,trackingCode:g,images:[...f,...t],createdAt:new Date}),k.fire("Başarılı!","Lojistik bilgileri başarıyla kaydedildi.","success"),o()}catch(t){console.error("Lojistik bilgileri kaydedilirken hata oluştu:",t),k.fire("Hata!","Lojistik bilgileri kaydedilirken bir hata oluştu.","error")}finally{b(!1)}}};return e.jsx("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:e.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Lojistik Bilgileri"}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"logisticsCompany",className:"block text-sm font-medium text-gray-700",children:"Lojistik Şirketi"}),e.jsx("input",{type:"text",id:"logisticsCompany",placeholder:"Lojistik Şirketi Adı",className:"mt-1 block w-full border border-gray-300 p-2 rounded-md",value:d,required:!0,onChange:t=>c(t.target.value),disabled:n})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"trackingCode",className:"block text-sm font-medium text-gray-700",children:"Takip Kodu"}),e.jsx("input",{type:"text",id:"trackingCode",placeholder:"Takip Kodu",required:!0,className:"mt-1 block w-full border border-gray-300 p-2 rounded-md",value:g,onChange:t=>x(t.target.value),disabled:n})]}),!n&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Resim Yükle"}),e.jsx("input",{type:"file",multiple:!0,required:!0,accept:"image/*",className:"mt-1 block w-full border border-gray-300 p-2 rounded-md",onChange:v})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Yüklenen Resimler"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2",children:[f.map((t,s)=>e.jsx("img",{src:t,alt:`Mevcut-${s}`,className:"w-full h-auto rounded-md"},s)),m.length>0&&m.map((t,s)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:URL.createObjectURL(t),alt:`Yüklenen-${s}`,className:"w-full h-auto rounded-md"}),e.jsx("button",{onClick:()=>N(s),className:"absolute top-1 right-1 bg-red-600 text-white rounded-full p-1 text-xs",children:"Kaldır"})]},s))]})]})]}),e.jsxs("div",{className:"mt-5 sm:mt-6 sm:flex sm:flex-row-reverse",children:[!n&&e.jsx("button",{onClick:C,className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 sm:ml-3 sm:w-auto sm:text-sm ${u?"cursor-not-allowed":""}`,disabled:u,children:u?"Kaydediliyor...":"Kaydet"}),e.jsx("button",{onClick:o,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:mt-0 sm:w-auto sm:text-sm",children:"Kapat"})]})]})]})})};export{$ as F,A as M};
