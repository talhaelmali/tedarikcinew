import{r as i,g as I,R as $,j as e,L as o,i as R,h as S,S as x,P as A,d as F}from"./index-DFtkyR6U.js";import{d as a}from"./dayjs.min-Cfwo7Ngx.js";import{r as M,d as z}from"./duration-BWaI6B3_.js";import{E as L}from"./EditAdModal-xZmQq29j.js";function O({title:s,titleId:r,...d},c){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":r},d),s?i.createElement("title",{id:r},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 0 0 .75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 0 0-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0 1 12 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 0 1-.673-.38m0 0A2.18 2.18 0 0 1 3 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 0 1 3.413-.387m7.5 0V5.25A2.25 2.25 0 0 0 13.5 3h-3a2.25 2.25 0 0 0-2.25 2.25v.894m7.5 0a48.667 48.667 0 0 0-7.5 0M12 12.75h.008v.008H12v-.008Z"}))}const j=i.forwardRef(O);a.extend(M);a.extend(z);const g=I(),G=$.memo(({ad:s})=>{const[r,d]=i.useState(0),[c,u]=i.useState(!1);i.useEffect(()=>{(async()=>{try{const n=await R(S(g,"companies",s.companyId,"ads",s.id,"bids"));d(n.size)}catch(n){console.error("Error fetching bid count: ",n)}})()},[s.companyId,s.id]);const b=(t,n=100)=>t.length>n?`${t.substring(0,n)}...`:t,N=s.createdAt&&s.createdAt instanceof Date?s.createdAt.toLocaleDateString():"Tarih yok",w=s.adType==="Kapalı Usül Teklif"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800",p=async()=>{if((await x.fire({title:"İlanı kaldırmak istediğinizden emin misiniz?",icon:"warning",showCancelButton:!0,confirmButtonText:"Evet, kaldır!",cancelButtonText:"Hayır, iptal et"})).isConfirmed)try{await A(F(g,"companies",s.companyId,"ads",s.id)),x.fire("Başarılı!","İlan kaldırıldı.","success").then(()=>{window.location.reload()})}catch(n){console.error("İlan kaldırılırken hata oluştu:",n),x.fire("Hata!","İlan kaldırılırken bir hata oluştu.","error")}},f=()=>{u(!0)},k=()=>{u(!1)},v=(t,n)=>{if(!t||!n)return null;let l;if(t.seconds)l=new Date(t.seconds*1e3);else if(t instanceof Date)l=new Date(t.getTime());else if(typeof t=="string")l=new Date(t);else return null;return l.setDate(l.getDate()+parseInt(n)),l},B=t=>{if(!t)return"Bilinmiyor";let n;if(t.seconds)n=a(t.seconds*1e3);else if(t instanceof Date)n=a(t.getTime());else if(typeof t=="string")n=a(t);else return"Bilinmiyor";const l=a(),y=n.diff(l);if(y<=0)return"İlan Süresi Doldu";const m=a.duration(y),T=Math.floor(m.asDays()),C=m.hours(),D=m.minutes();return`${T} gün ${C} saat ${D} dakika`},E=s.endDate||v(s.createdAt,s.duration),h=B(E);return e.jsxs(e.Fragment,{children:[e.jsx("li",{className:"py-4",children:e.jsxs("div",{className:"border rounded-lg shadow-sm bg-white",children:[e.jsxs("div",{className:"hidden md:flex justify-between items-start p-4",children:[e.jsxs("div",{className:"flex flex-col space-y-2 w-1/3",children:[e.jsx("div",{className:"flex items-center space-x-2",children:s.sectors.map((t,n)=>e.jsx("span",{className:"bg-gray-100 text-gray-800 text-xs font-medium px-2 py-1 rounded",children:t},n))}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:e.jsx(o,{to:`/ad-details/${s.companyId}/${s.id}`,className:"hover:underline",children:s.title})}),e.jsxs("span",{className:"text-blue-600",children:["#",s.id]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:b(s.content)}),e.jsxs(o,{to:`/ad-details/${s.companyId}/${s.id}`,className:"flex items-center bg-blue-800 text-white px-3 py-1 rounded-md text-xs font-medium w-max",children:[e.jsx(j,{className:"h-4 w-4 mr-1"}),"Gelen Teklifler (",r,")"]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-start space-y-2 w-1/3",children:[e.jsx("button",{onClick:p,className:"bg-red-100 text-red-700 px-3 py-1 rounded-md text-xs font-medium w-1/2",children:"Kaldır"}),e.jsx("button",{className:"bg-yellow-100 text-yellow-700 px-3 py-1 rounded-md text-xs font-medium w-1/2",children:"İlan Beklemeye Al"}),e.jsx("button",{onClick:f,className:"bg-blue-100 text-blue-700 px-3 py-1 rounded-md text-xs font-medium w-1/2",children:"İlanı Düzenle"})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-2 w-1/3",children:[e.jsxs("div",{className:"flex space-x-2 justify-end",children:[e.jsx("span",{className:`${w} px-2 py-1 text-xs font-medium rounded`,children:s.adType}),e.jsx("span",{className:"text-gray-500 text-xs",children:N})]}),e.jsxs("div",{className:"space-y-1 text-right",children:[s.requestSample&&e.jsx("div",{className:"inline-block bg-blue-800 text-white text-xs font-medium px-2 py-1 rounded-md mr-1",children:"Numune Talep Ediyor"}),s.maxBid&&e.jsxs("div",{className:"inline-block bg-[#EE6F2D] text-white text-xs font-medium px-2 py-1 rounded-md",children:["Bütçe: ",new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(s.maxBid)]})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[e.jsx("span",{className:"text-blue-600",children:"İlanın Bitimine:"})," ",h]})]})]}),e.jsx("div",{className:"md:hidden p-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-900",children:[e.jsx(o,{to:`/ad-details/${s.companyId}/${s.id}`,className:"hover:underline",children:s.title}),e.jsxs("span",{className:"text-blue-600",children:[" #",s.id]})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:s.sectors&&s.sectors.map((t,n)=>e.jsx("span",{className:"bg-gray-100 text-gray-800 text-xs font-medium px-2 py-1 rounded",children:t},n))}),e.jsxs("div",{className:"mt-2 flex items-start gap-2",children:[s.requestSample&&e.jsx("span",{className:"bg-blue-800 text-white text-xs font-medium px-2 py-1 rounded-md",children:"Numune Talep Ediyor"}),s.maxBid&&e.jsxs("span",{className:"bg-[#EE6F2D] text-white text-xs font-medium px-2 py-1 rounded-md",children:["Bütçe: ",new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(s.maxBid)]})]}),e.jsxs(o,{to:`/ad-details/${s.companyId}/${s.id}`,className:"mt-2 inline-block bg-blue-800 text-white px-3 py-1 rounded-md text-xs font-medium",children:[e.jsx(j,{className:"h-4 w-4 mr-1"}),"Gelen Teklifler (",r,")"]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[e.jsx("span",{className:"text-blue-600",children:"İlanın Bitimine:"})," ",h]})]}),e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("button",{onClick:p,className:"bg-red-100 text-red-700 px-3 py-1 rounded-md text-xs font-medium",children:"Kaldır"}),e.jsx("button",{className:"bg-yellow-100 text-yellow-700 px-3 py-1 rounded-md text-xs font-medium",children:"Beklemeye Al"}),e.jsx("button",{onClick:f,className:"bg-blue-100 text-blue-700 px-3 py-1 rounded-md text-xs font-medium",children:"Düzenle"})]})]})})]})}),c&&e.jsx(L,{isOpen:c,onRequestClose:k,adId:s.id,companyId:s.companyId,adData:s})]})});export{G as B};
