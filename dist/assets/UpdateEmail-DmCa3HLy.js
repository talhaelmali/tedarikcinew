import{r as t,l as h,j as a,E,m as f,n as u,p as y}from"./index-DFtkyR6U.js";import{s as r}from"./sweetalert.min-CSWmtg_p.js";const k=()=>{const[s,c]=t.useState(""),[o,m]=t.useState(""),[n,d]=t.useState(!1),p=h(),g=async l=>{l.preventDefault();const i=p.currentUser;if(!i){r("Hata","Kullanıcı oturumu bulunamadı","error");return}try{d(!0),console.log("Kimlik doğrulama işlemi başlatılıyor...");const e=E.credential(i.email,o);if(await f(i,e),console.log("Kimlik doğrulama başarılı."),!i.emailVerified){await u(i),console.log("Eski e-posta adresine doğrulama gönderildi."),r("E-posta Doğrulaması Gerekiyor","Eski e-posta adresinize bir doğrulama e-postası gönderildi. Lütfen önce bu e-postayı doğrulayın.","warning");return}await y(i,s),console.log("Yeni e-posta başarıyla güncellendi: ",s),await u(i),console.log("Yeni e-posta adresine doğrulama e-postası gönderildi."),r("Başarılı",`E-posta adresi güncellendi! Lütfen ${s} adresine gönderilen doğrulama bağlantısına tıklayın.`,"success")}catch(e){e.code==="auth/requires-recent-login"?(console.error("Kimlik doğrulama gerekli:",e),r("Hata","Güvenlik nedeniyle tekrar giriş yapmanız gerekiyor.","error")):e.code==="auth/invalid-email"?(console.error("Geçersiz e-posta:",e),r("Hata","Geçersiz bir e-posta adresi girdiniz.","error")):e.code==="auth/email-already-in-use"?(console.error("E-posta zaten kullanımda:",e),r("Hata","Bu e-posta adresi zaten kullanımda.","error")):e.code==="auth/operation-not-allowed"?(console.error("E-posta değişikliği yapılamıyor:",e),r("Hata","Bu işlem şu anda izinli değil. Lütfen admin ile iletişime geçin.","error")):(console.error("E-posta güncellenirken bir hata oluştu:",e),r("Hata",e.message,"error"))}finally{d(!1)}};return a.jsxs("div",{children:[a.jsx("h2",{children:"E-posta Güncelle"}),a.jsxs("form",{onSubmit:g,children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"newEmail",children:"Yeni E-posta"}),a.jsx("input",{type:"email",id:"newEmail",value:s,onChange:l=>c(l.target.value),required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",children:"Şifre"}),a.jsx("input",{type:"password",id:"password",value:o,onChange:l=>m(l.target.value),required:!0})]}),a.jsx("button",{type:"submit",disabled:n,children:n?"Güncelleniyor...":"E-posta Güncelle"})]})]})};export{k as default};
