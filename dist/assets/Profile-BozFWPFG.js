import{r,u as C,l as F,d as h,I as y,f as A,j as e,az as m,x as B,E as z,m as D,aA as O,e as R}from"./index-DFtkyR6U.js";import{s as t}from"./sweetalert.min-CSWmtg_p.js";function K(){const[l,c]=r.useState(""),[u,x]=r.useState(""),[w,v]=r.useState(""),[f,N]=r.useState(""),[n,j]=r.useState(""),[g,k]=r.useState(""),[P,b]=r.useState(!0),[T,S]=r.useState(""),p=C(),d=F();r.useEffect(()=>{const s=d.onAuthStateChanged(async a=>{if(a){c(a.displayName||""),v(a.email||""),S(a.email||"");try{const o=h(y,"users",a.uid),i=await A(o);i.exists()?x(i.data().phone||""):console.log("Belge bulunamadı!")}catch(o){console.error("Telefon numarası alınırken hata oluştu: ",o)}b(!1)}else b(!1),t("Oturum açılmadı","Profil sayfasını görüntülemek için giriş yapmalısınız.","error").then(()=>{p("/login")})});return()=>s()},[p,d]);const E=async s=>{s.preventDefault();const a=d.currentUser;if(!a){t("Hata","Kullanıcı oturumu bulunamadı.","error");return}try{if(l!==a.displayName&&await B(a,{displayName:l}),n&&n===g){const i=z.credential(a.email,f);await D(a,i),await O(a,n),t("Başarılı","Şifreniz güncellendi.","success")}const o=h(y,"users",a.uid);await R(o,{fullName:l,phone:u},{merge:!0}),t("Başarılı","Profil bilgileriniz güncellendi!","success").then(()=>{window.location.reload()})}catch(o){console.error("Profil güncellenirken hata oluştu: ",o),t("Hata",o.message,"error")}};return P?e.jsx("div",{children:"Yükleniyor..."}):e.jsxs("div",{className:"pb-8",children:[e.jsxs("nav",{className:"flex border-b border-gray-200 mb-6",children:[e.jsx(m,{to:"/profile",className:({isActive:s})=>s?"text-blue-800 border-b-2 border-blue-800 py-2 px-4":"text-gray-600 py-2 px-4 hover:text-blue-600",children:"Profil"}),e.jsx(m,{to:"/my-company",className:({isActive:s})=>s?"text-blue-800 border-b-2 border-blue-800 py-2 px-4":"text-gray-600 py-2 px-4 hover:text-blue-600",children:"Firma Bilgileri"}),e.jsx(m,{to:"/teammembers",className:({isActive:s})=>s?"text-blue-800 border-b-2 border-blue-800 py-2 px-4":"text-gray-600 py-2 px-4 hover:text-blue-600",children:"Ekip Üyeleri"})]}),e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Profil"}),e.jsxs("form",{onSubmit:E,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"full-name",className:"block text-sm font-medium text-gray-700",children:"Ad Soyad"}),e.jsx("input",{id:"full-name",name:"full-name",type:"text",value:l,onChange:s=>c(s.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Telefon Numarası"}),e.jsx("input",{id:"phone",name:"phone",type:"tel",value:u,onChange:s=>x(s.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"E-Posta"}),e.jsx("input",{id:"email",name:"email",type:"email",value:w,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-gray-100 cursor-not-allowed"})]})]}),e.jsx("h3",{className:"text-lg font-medium mt-6 mb-4",children:"Şifre Bilgileri"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"old-password",className:"block text-sm font-medium text-gray-700",children:"Eski Şifre"}),e.jsx("input",{id:"old-password",name:"old-password",type:"password",value:f,onChange:s=>N(s.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-700",children:"Yeni Şifre"}),e.jsx("input",{id:"new-password",name:"new-password",type:"password",value:n,onChange:s=>j(s.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700",children:"Yeni Şifre Tekrar"}),e.jsx("input",{id:"confirm-password",name:"confirm-password",type:"password",value:g,onChange:s=>k(s.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{type:"submit",className:"py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-opacity-75",children:"Kaydet"})})]})]})}export{K as default};
