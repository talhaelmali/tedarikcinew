import{r as s,G as M,j as e,D as S,H as V,I as Q,F as K,i as _,J as B,h as D,K as L,L as O,g as z,u as q}from"./index-Dcbjm_y_.js";import{B as F}from"./BuyerAdCard-C8xDBQzy.js";import{d as E}from"./dayjs.min-BlpTt0Ad.js";import{A as H}from"./AdCard-D0Xofyw7.js";import"./duration-13dM_ovc.js";import"./EditAdModal-DDCd-jM-.js";import"./index-dfNAwhCR.js";import"./react-select.esm-Dy9iw_O8.js";function J({title:t,titleId:a,...r},d){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":a},r),t?s.createElement("title",{id:a},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125v-9M10.125 2.25h.375a9 9 0 0 1 9 9v.375M10.125 2.25A3.375 3.375 0 0 1 13.5 5.625v1.5c0 .621.504 1.125 1.125 1.125h1.5a3.375 3.375 0 0 1 3.375 3.375M9 15l2.25 2.25L15 12"}))}const U=s.forwardRef(J);function X({title:t,titleId:a,...r},d){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":a},r),t?s.createElement("title",{id:a},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"}))}const Y=s.forwardRef(X);function ee({title:t,titleId:a,...r},d){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":a},r),t?s.createElement("title",{id:a},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 1 1 0-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.962.584 1.892.985 2.783.247.55.06 1.21-.463 1.511l-.657.38c-.551.318-1.26.117-1.527-.461a20.845 20.845 0 0 1-1.44-4.282m3.102.069a18.03 18.03 0 0 1-.59-4.59c0-1.586.205-3.124.59-4.59m0 9.18a23.848 23.848 0 0 1 8.835 2.535M10.34 6.66a23.847 23.847 0 0 0 8.835-2.535m0 0A23.74 23.74 0 0 0 18.795 3m.38 1.125a23.91 23.91 0 0 1 1.014 5.395m-1.014 8.855c-.118.38-.245.754-.38 1.125m.38-1.125a23.91 23.91 0 0 0 1.014-5.395m0-3.46c.495.413.811 1.035.811 1.73 0 .695-.316 1.317-.811 1.73m0-3.46a24.347 24.347 0 0 1 0 3.46"}))}const te=s.forwardRef(ee);function se({title:t,titleId:a,...r},d){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":a},r),t?s.createElement("title",{id:a},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 0 1-2.25 2.25M16.5 7.5V18a2.25 2.25 0 0 0 2.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 0 0 2.25 2.25h13.5M6 7.5h3v3H6v-3Z"}))}const ae=s.forwardRef(se);function re({title:t,titleId:a,...r},d){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":a},r),t?s.createElement("title",{id:a},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const ne=s.forwardRef(re);function ie({title:t,titleId:a,...r},d){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":a},r),t?s.createElement("title",{id:a},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"}))}const de=s.forwardRef(ie);function T(){const{company:t}=M(),[a,r]=s.useState(0);s.useEffect(()=>{(async()=>{if(t&&t.id)try{const b=S(V(Q,"ads"),K("companyId","==",t.id)),i=await _(b);r(i.size),i.forEach(v=>{})}catch(b){console.error("Error fetching ad count:",b)}})()},[t]);const d=[{id:1,name:"İlanlarım",stat:a,icon:ae},{id:2,name:"Gelen Teklifler",stat:"4",icon:Y},{id:3,name:"Alınan Siparişler",stat:"12",icon:ne}];return e.jsx("div",{children:e.jsx("dl",{className:"mt-5 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3",children:d.map(g=>e.jsxs("div",{className:"relative overflow-hidden rounded-lg bg-white px-4 pt-5 shadow sm:px-6",children:[e.jsxs("dt",{children:[e.jsx("div",{className:"absolute rounded-md bg-blue-500 p-3",children:e.jsx(g.icon,{className:"h-6 w-6 text-white","aria-hidden":"true"})}),e.jsx("p",{className:"ml-16 truncate text-sm text-gray-500",children:g.name})]}),e.jsx("dd",{className:"ml-16 flex items-baseline pb-5",children:e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:g.stat})})]},g.id))})})}const le=z();function oe(){const{company:t,loading:a}=M(),[r,d]=s.useState([]),[g,b]=s.useState(!0);s.useEffect(()=>{if(t){const o=S(D(le,"companies",t.id,"ads"),B("createdAt","desc")),p=L(o,j=>{const N=[];j.forEach(w=>{const m=w.data();m.id=w.id,m.createdAt&&m.createdAt.toDate&&(m.createdAt=m.createdAt.toDate());const C=i(m.createdAt,m.duration);v(C)&&N.push({id:w.id,...m})}),d(N),b(!1)});return()=>p()}},[t]);const i=(o,p)=>{if(!o||!p)return null;const j=new Date(o.getTime());return j.setDate(j.getDate()+parseInt(p,10)),j},v=o=>o&&E(o).isAfter(E()),l=s.useMemo(()=>r.filter(o=>o.userId===(t==null?void 0:t.adminUserId)),[r,t]);return a||g?e.jsx("div",{children:"Loading..."}):t?e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-base leading-6 text-gray-900",children:"Son 30 Gün"}),e.jsx(O,{to:"/createad",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:"İlan Oluştur"})]}),e.jsx("div",{className:"mt-6",children:e.jsx(T,{})}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"İlanlarım"}),e.jsx("ul",{role:"list",className:"divide-y divide-gray-200 mt-4",children:l.length>0?l.map(o=>e.jsx(F,{ad:o},`${o.companyId}-${o.id}`)):e.jsx("p",{className:"mt-4 text-sm text-gray-500",children:"Henüz bir ilan yok."})})]})]}):e.jsx("div",{children:"No company found for this user."})}const ce=[{id:1,name:"Teklifleriniz",stat:"10",icon:te},{id:2,name:"Onaylanan Teklifler",stat:"4",icon:U},{id:3,name:"Satılan Siparişler",stat:"12",icon:de}];function G(){return e.jsx("div",{children:e.jsx("dl",{className:"mt-5 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3",children:ce.map(t=>e.jsxs("div",{className:"relative overflow-hidden rounded-lg bg-white px-4 pt-5 shadow sm:px-6 ",children:[e.jsxs("dt",{children:[e.jsx("div",{className:"absolute rounded-md bg-blue-500 p-3",children:e.jsx(t.icon,{className:"h-6 w-6 text-white","aria-hidden":"true"})}),e.jsx("p",{className:"ml-16 truncate text-sm  text-gray-500",children:t.name})]}),e.jsx("dd",{className:"ml-16 flex items-baseline pb-5",children:e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:t.stat})})]},t.id))})})}const I=z();function me(){const{company:t,loading:a}=M(),[r,d]=s.useState([]),[g,b]=s.useState(!0),[i,v]=s.useState(1),[l]=s.useState(5),[o,p]=s.useState(0);s.useEffect(()=>{if(t){const c=L(S(D(I,"companies")),x=>{const f=[];x.forEach(k=>{const n=S(D(I,"companies",k.id,"ads"),B("createdAt","desc"));L(n,h=>{h.forEach(y=>{const u=y.data();u.createdAt&&u.createdAt.seconds&&(u.createdAt=new Date(u.createdAt.seconds*1e3)),u.endDate&&u.endDate.seconds&&(u.endDate=new Date(u.endDate.seconds*1e3));const R=j(u.createdAt,u.duration);N(R)&&f.push({id:y.id,...u,companyId:k.id})}),w(f)})})});return()=>c()}},[t,i]);const j=(c,x)=>{if(!c||!x)return null;const f=new Date(c);return f.setDate(f.getDate()+parseInt(x,10)),f},N=c=>c&&E(c).isAfter(E()),w=c=>{const x=c.sort((f,k)=>k.createdAt-f.createdAt);p(x.length),d(x.slice((i-1)*l,i*l)),b(!1)},m=c=>v(c),C=Math.ceil(o/l);return a||g?e.jsx("div",{children:"Loading..."}):t?e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h3",{className:"text-base leading-6 text-gray-900",children:"Son 30 Gün"})}),e.jsx(G,{}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"İlanlar"}),r.length>0?e.jsx("ul",{role:"list",className:"divide-y divide-gray-200 mt-4",children:r.map(c=>e.jsx(H,{ad:c},`${c.companyId}-${c.id}`))}):e.jsx("p",{className:"mt-4 text-sm text-gray-500",children:"Henüz bir ilan yok."}),C>1&&e.jsxs("nav",{className:"flex items-center justify-between border-t border-gray-200 px-4 sm:px-0 mt-4",children:[e.jsx("div",{className:"-mt-px flex w-0 flex-1",children:e.jsx("button",{onClick:()=>m(i-1),className:"inline-flex items-center border-t-2 border-transparent pr-1 pt-4 text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700",disabled:i===1,children:"Önceki"})}),e.jsx("div",{className:"hidden md:-mt-px md:flex",children:Array.from({length:C},(c,x)=>e.jsx("button",{onClick:()=>m(x+1),className:`inline-flex items-center border-t-2 ${i===x+1?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"} px-4 pt-4 text-sm font-medium`,"aria-current":i===x+1?"page":void 0,children:x+1},x))}),e.jsx("div",{className:"-mt-px flex w-0 flex-1 justify-end",children:e.jsx("button",{onClick:()=>m(i+1),className:"inline-flex items-center border-t-2 border-transparent pl-1 pt-4 text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700",disabled:i===C,children:"Sonraki"})})]})]}):e.jsx("div",{children:"No company found for this user."})}const P=z(),xe=()=>{const{company:t,loading:a}=M(),[r,d]=s.useState([]),[g,b]=s.useState(!0),[i,v]=s.useState("ilanlar"),[l,o]=s.useState(1),[p]=s.useState(5),[j,N]=s.useState(0);s.useEffect(()=>{if(t){const n=L(S(D(P,"companies")),h=>{const y=[];h.forEach(u=>{const R=S(D(P,"companies",u.id,"ads"),B("createdAt","desc"));L(R,W=>{W.forEach($=>{const A=$.data();A.id=$.id,A.createdAt&&A.createdAt.toDate&&(A.createdAt=A.createdAt.toDate());const Z=w(A.createdAt,A.duration);m(Z)&&y.push({id:$.id,...A,companyId:u.id})}),C(y)})})});return()=>n()}},[t,l]);const w=(n,h)=>{if(!n||!h)return null;const y=new Date(n.getTime());return y.setDate(y.getDate()+parseInt(h,10)),y},m=n=>n&&E(n).isAfter(E()),C=n=>{const h=n.sort((y,u)=>u.createdAt-y.createdAt);N(h.length),d(h.slice((l-1)*p,l*p)),b(!1)},c=s.useMemo(()=>r.filter(n=>n.companyId===(t==null?void 0:t.id)),[r,t]),x=s.useMemo(()=>r.filter(n=>n.companyId!==(t==null?void 0:t.id)),[r,t]),f=Math.ceil(j/p),k=n=>{o(n)};return a||g?e.jsx("div",{children:"Loading..."}):t?e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-base leading-6 text-gray-900",children:"Son 30 Gün"}),e.jsx(O,{to:"/createad",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:"İlan Oluştur"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx(T,{}),e.jsx(G,{})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:()=>v("ilanlar"),className:`px-3 py-2 rounded-md ${i==="ilanlar"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"}`,children:"İlanlar"}),e.jsx("button",{onClick:()=>v("ilanlarim"),className:`px-3 py-2 rounded-md ${i==="ilanlarim"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"}`,children:"İlanlarım"})]}),i==="ilanlar"&&e.jsx("ul",{role:"list",className:"divide-y divide-gray-200 mt-4",children:x.length>0?x.map(n=>e.jsx(H,{ad:n},`${n.companyId}-${n.id}`)):e.jsx("p",{className:"mt-4 text-sm text-gray-500",children:"Henüz bir ilan yok."})}),i==="ilanlarim"&&e.jsx("ul",{role:"list",className:"divide-y divide-gray-200 mt-4",children:c.length>0?c.map(n=>e.jsx(F,{ad:n},`${n.companyId}-${n.id}`)):e.jsx("p",{className:"mt-4 text-sm text-gray-500",children:"Henüz bir ilan yok."})})]}),f>1&&e.jsxs("nav",{className:"flex items-center justify-between border-t border-gray-200 px-4 sm:px-0 mt-4",children:[e.jsx("div",{className:"-mt-px flex w-0 flex-1",children:e.jsx("button",{onClick:()=>k(l-1),className:`inline-flex items-center border-t-2 border-transparent pr-1 pt-4 text-sm font-medium ${l===1?"text-gray-300 cursor-not-allowed":"text-gray-500 hover:border-gray-300 hover:text-gray-700"}`,disabled:l===1,children:"Önceki"})}),e.jsx("div",{className:"hidden md:-mt-px md:flex",children:Array.from({length:f},(n,h)=>e.jsx("button",{onClick:()=>k(h+1),className:`inline-flex items-center border-t-2 ${l===h+1?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"} px-4 pt-4 text-sm font-medium`,children:h+1},h))}),e.jsx("div",{className:"-mt-px flex w-0 flex-1 justify-end",children:e.jsx("button",{onClick:()=>k(l+1),className:`inline-flex items-center border-t-2 border-transparent pl-1 pt-4 text-sm font-medium ${l===f?"text-gray-300 cursor-not-allowed":"text-gray-500 hover:border-gray-300 hover:text-gray-700"}`,disabled:l===f,children:"Sonraki"})})]})]}):e.jsx("div",{children:"No company found for this user."})};function ve(){const{company:t,loading:a}=M(),[r,d]=s.useState(!1),[g,b]=s.useState(""),i=q(),v=s.useCallback(m=>{b(m),d(!0)},[]),l=s.useCallback(()=>{d(!1),b("")},[]);if(s.useEffect(()=>{if(!(a||!t)){if(Object.keys(t).length===0){i("/createcompany");return}(!t.sectors||t.sectors.length===0)&&i(`/sectors/${t.id}`)}},[t,a,i]),a)return e.jsx("div",{children:"Loading..."});if(!t)return null;const o=(t==null?void 0:t.isBuyer)&&(t==null?void 0:t.isBuyerConfirmed)==="pending",p=(t==null?void 0:t.isSeller)&&(t==null?void 0:t.isSellerConfirmed)==="pending",j=(t==null?void 0:t.isBuyer)&&(t==null?void 0:t.isBuyerConfirmed)==="no",N=(t==null?void 0:t.isSeller)&&(t==null?void 0:t.isSellerConfirmed)==="no",w=()=>{i("/support")};return e.jsxs("div",{className:"max-w-4xl mx-auto",children:[o&&e.jsx("div",{className:"bg-yellow-100 p-4 mb-4 rounded",children:"Şirketiniz alıcı olarak onay beklemektedir."}),p&&e.jsx("div",{className:"bg-yellow-100 p-4 mb-4 rounded",children:"Şirketiniz satıcı olarak onay beklemektedir."}),j&&e.jsxs("div",{className:"bg-red-100 p-4 mb-4 rounded",children:["Şirketinizin alıcı olarak sistemimize dahil olması red edilmiştir.",e.jsx("button",{onClick:()=>v(t.buyerRejectionReason),className:"ml-4 bg-red-500 text-white px-3 py-1 rounded",children:"İşlemler"})]}),N&&e.jsxs("div",{className:"bg-red-100 p-4 mb-4 rounded",children:["Şirketinizin satıcı olarak sistemimize dahil olması red edilmiştir.",e.jsx("button",{onClick:()=>v(t.sellerRejectionReason),className:"ml-4 bg-red-500 text-white px-3 py-1 rounded",children:"İşlemler"})]}),r&&e.jsx("div",{className:"fixed z-10 inset-0 overflow-y-auto bg-black bg-opacity-50",children:e.jsx("div",{className:"flex items-center justify-center min-h-screen px-4",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-lg w-full",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Red Nedeni"}),e.jsx("p",{className:"text-gray-700 mb-4",children:g||"Red nedeni belirtilmemiş."}),e.jsxs("div",{className:"mt-4 bg-gray-100 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Destek Bilgilendirme"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Firma bilgilerinizi güncellemek veya itiraz etmek için destek sistemimizi kullanabilirsiniz."})]}),e.jsxs("div",{className:"flex justify-end mt-6",children:[e.jsx("button",{onClick:l,className:"bg-gray-400 text-white px-4 py-2 rounded mr-4",children:"Kapat"}),e.jsx("button",{onClick:w,className:"bg-indigo-500 text-white px-4 py-2 rounded",children:"Destek Sistemine Git"})]})]})})}),t.isBuyerConfirmed==="yes"&&t.isSellerConfirmed==="yes"?e.jsx(xe,{}):e.jsxs(e.Fragment,{children:[t.isBuyerConfirmed==="yes"&&e.jsx(oe,{}),t.isSellerConfirmed==="yes"&&e.jsx(me,{})]})]})}export{ve as default};
