import{r as c,u as D,o as S,j as e,g as z,S as m,a as B,s as A,b as L,c as R,d as v,e as E,f as T,h as U,i as q,k as P}from"./index-DFtkyR6U.js";import{F as H}from"./CheckIcon-CDFuwzLg.js";import{v as I}from"./v4-SoommWqA.js";const f=z();function G(){const[t,g]=c.useState({companyName:"",companyTitle:"",address:"",city:"",district:"",postalCode:"",isBuyer:!1,isSeller:!1,sectors:[],taxDocumentURL:"",phone:"",email:""}),p=[{id:"01",name:"Kullanıcı Bilgileri",href:"#",status:"complete"},{id:"02",name:"Firma Bilgileri",href:"#",status:"current"},{id:"03",name:"Sektör Bilgisi",href:"#",status:"upcoming"}],[u,y]=c.useState(null),[n,b]=c.useState(null),x=D();c.useEffect(()=>{const s=S(P,async a=>{if(a){y(a);const l=v(f,"users",a.uid),r=await T(l);if(r.exists()){const d=r.data();g(F=>({...F,phone:d.phone||"",email:d.email||a.email}))}const o=U(f,"companies"),h=await q(o);let j=!1;h.forEach(d=>{d.data().adminUserId===a.uid&&(j=!0)}),j&&m.fire({icon:"warning",title:"Zaten Şirket İlişkilendirilmiş",text:"Bu kullanıcı zaten bir şirket ile ilişkilendirilmiş. Dashboard sayfasına yönlendiriliyorsunuz."}).then(()=>{x("/dashboard")})}else y(null)});return()=>s()},[x]);const i=s=>{const{name:a,value:l,type:r,checked:o}=s.target;g({...t,[a]:r==="checkbox"?o:l})},k=s=>{const a=s.target.files[0];a&&b(a)},N=()=>{b(null)},w=s=>{s.preventDefault();const a=s.dataTransfer.files;a&&a[0]&&k({target:{files:a}})},C=async s=>{if(s.preventDefault(),!t.isBuyer&&!t.isSeller){m.fire({icon:"error",title:"Hata",text:"Alıcı profili veya satıcı profilinden en az birini seçmelisiniz."});return}const a=I();try{let l="";if(n){const o=B(A,`taxDocuments/${a}/${n.name}`),h=await L(o,n);l=await R(h.ref)}const r=v(f,"companies",a);await E(r,{...t,taxDocumentURL:l,isBuyerConfirmed:"pending",isSellerConfirmed:"pending",paymentStatus:!1,adminUserId:u?u.uid:null,teamMembers:{[u.uid]:"admin"},taxDocumentVerified:!1,signatureCircularVerified:!1,activityCertificateVerified:!1}),m.fire({icon:"success",title:"Başarılı",text:"Firma bilgileri başarıyla kaydedildi."}).then(()=>{x(`/sectors/${a}`)})}catch(l){m.fire({icon:"error",title:"Hata",text:"Bilgiler kaydedilirken bir hata oluştu: "+l.message})}};return e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("nav",{"aria-label":"Progress",className:"pb-10",children:e.jsx("ol",{role:"list",className:"divide-y divide-gray-300 rounded-md border border-gray-300 md:flex md:divide-y-0",children:p.map((s,a)=>e.jsxs("li",{className:"relative md:flex md:flex-1",children:[s.status==="complete"?e.jsx("div",{className:"group flex w-full items-center",children:e.jsxs("span",{className:"flex items-center px-6 py-4 text-sm font-medium",children:[e.jsx("span",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-full bg-blue-600 group-hover:bg-blue-800",children:e.jsx(H,{className:"h-6 w-6 text-white","aria-hidden":"true"})}),e.jsx("span",{className:"ml-4 text-sm font-medium text-gray-900",children:s.name})]})}):s.status==="current"?e.jsxs("div",{className:"flex items-center px-6 py-4 text-sm font-medium","aria-current":"step",children:[e.jsx("span",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-full border-2 border-blue-600",children:e.jsx("span",{className:"text-blue-600",children:s.id})}),e.jsx("span",{className:"ml-4 text-sm font-medium text-blue-600",children:s.name})]}):e.jsx("div",{className:"group flex items-center",children:e.jsxs("span",{className:"flex items-center px-6 py-4 text-sm font-medium",children:[e.jsx("span",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-full border-2 border-gray-300 group-hover:border-gray-400",children:e.jsx("span",{className:"text-gray-500 group-hover:text-gray-900",children:s.id})}),e.jsx("span",{className:"ml-4 text-sm font-medium text-gray-500 group-hover:text-gray-900",children:s.name})]})}),a!==p.length-1?e.jsx(e.Fragment,{children:e.jsx("div",{className:"absolute right-0 top-0 hidden h-full w-5 md:block","aria-hidden":"true",children:e.jsx("svg",{className:"h-full w-full text-gray-300",viewBox:"0 0 22 80",fill:"none",preserveAspectRatio:"none",children:e.jsx("path",{d:"M0 -2L20 40L0 82",vectorEffect:"non-scaling-stroke",stroke:"currentcolor",strokeLinejoin:"round"})})})}):null]},s.name))})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium leading-6 text-gray-900",children:"Firma Bilgileri"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Firmanızın detaylı bilgilerini aşağıya giriniz."})]}),e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-y-6 sm:grid-cols-6 sm:gap-x-6",children:[e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx("label",{htmlFor:"companyName",className:"block text-sm font-medium leading-6 text-gray-900",children:"Firma Adı"}),e.jsx("input",{type:"text",required:!0,name:"companyName",id:"companyName",autoComplete:"organization",value:t.companyName,onChange:i,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-500 focus:ring-sky-500 sm:text-sm"})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx("label",{htmlFor:"companyTitle",className:"block text-sm font-medium leading-6 text-gray-900",children:"Firma Unvanı"}),e.jsx("input",{type:"text",required:!0,name:"companyTitle",id:"companyTitle",autoComplete:"organization-title",value:t.companyTitle,onChange:i,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-500 focus:ring-sky-500 sm:text-sm"})]}),e.jsxs("div",{className:"sm:col-span-6",children:[e.jsx("label",{htmlFor:"address",className:"block text-sm font-medium leading-6 text-gray-900",children:"Adres"}),e.jsx("input",{type:"text",required:!0,name:"address",id:"address",autoComplete:"street-address",value:t.address,onChange:i,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-500 focus:ring-sky-500 sm:text-sm"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"city",className:"block text-sm font-medium leading-6 text-gray-900",children:"İl"}),e.jsx("input",{type:"text",required:!0,name:"city",id:"city",autoComplete:"address-level1",value:t.city,onChange:i,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-500 focus:ring-sky-500 sm:text-sm"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"district",className:"block text-sm font-medium leading-6 text-gray-900",children:"İlçe"}),e.jsx("input",{type:"text",required:!0,name:"district",id:"district",autoComplete:"address-level2",value:t.district,onChange:i,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-500 focus:ring-sky-500 sm:text-sm"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"postalCode",className:"block text-sm font-medium leading-6 text-gray-900",children:"Posta Kodu"}),e.jsx("input",{type:"text",required:!0,name:"postalCode",id:"postalCode",autoComplete:"postal-code",value:t.postalCode,onChange:i,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-500 focus:ring-sky-500 sm:text-sm"})]}),e.jsx("label",{htmlFor:"taxDocument",className:"block text-sm font-medium leading-6 text-gray-900",children:"Profil Türü"}),e.jsxs("div",{className:"sm:col-span-6 flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"buyer",name:"isBuyer",type:"checkbox",checked:t.isBuyer,onChange:i,className:"h-4 w-4 text-sky-600 border-gray-300 focus:ring-sky-500 rounded"}),e.jsx("label",{htmlFor:"buyer",className:"ml-3 block text-sm font-medium text-gray-700",children:"Alıcı Profili Açmak İstiyorum"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"seller",name:"isSeller",type:"checkbox",checked:t.isSeller,onChange:i,className:"h-4 w-4 text-sky-600 border-gray-300 focus:ring-sky-500 rounded"}),e.jsx("label",{htmlFor:"seller",className:"ml-3 block text-sm font-medium text-gray-700",children:"Satıcı Profili Açmak İstiyorum"})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{htmlFor:"taxDocument",className:"block text-sm font-medium leading-6 text-gray-900",children:"Firma Evrakları"}),e.jsx("label",{htmlFor:"taxDocument",className:"block text-xs font-medium leading-6 text-gray-900",children:"Lütfen belirtilen belgeleri tek bir PDF halinde birleştirerek yükleyin:"}),e.jsxs("ul",{className:"list-disc pl-5 text-xs text-gray-900",children:[e.jsx("li",{children:"Yetkili kimlik (Ön ve Arka Yüzü)"}),e.jsx("li",{children:"İmza Sirküleri"}),e.jsx("li",{children:"Faaliyet Belgesi"}),e.jsx("li",{children:"Firma adı ve IBAN bilgisi"}),e.jsx("li",{children:"Ticaret Sicil Gazetesi"}),e.jsx("li",{children:"Tek ortaklı şirketlerde ilgili kişinin ikametgah belgesi"}),e.jsx("li",{children:"Birden fazla ortaklı şirketlerde paya sahip kişilerin kimlik ve ikametgah belgeleri"}),e.jsx("li",{children:"Üyelik sözleşmesinin kaşe ve imzalı şekilde olması"})]}),e.jsx("a",{href:"https://firebasestorage.googleapis.com/v0/b/ihale-6cb24.appspot.com/o/CADERK%20LTD.%20S%CC%A7TI%CC%87.-%20U%CC%88YELI%CC%87K%20SO%CC%88ZLES%CC%A7ME.docx?alt=media&token=a8c54436-3d1a-4da6-80f2-b6be64457732",className:"block text-xs font-medium leading-6 text-blue-900 underline",children:"  Üyelik sözleşmesini indirmek için tıklayın. "}),e.jsx("div",{className:"mt-1 flex justify-center rounded-md border-2 border-dashed border-gray-300 px-6 pt-5 pb-6",onDragOver:s=>s.preventDefault(),onDrop:w,children:e.jsxs("div",{className:"space-y-1 text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:e.jsx("path",{d:"M28 8H20a2 2 0 00-2 2v28a2 2 0 002 2h8a2 2 0 002-2V10a2 2 0 00-2-2zm-2 32H22V12h4v28zM12 6h24v4H12V6zm0 32h24v4H12v-4z"})}),n?e.jsxs("div",{className:"mt-2 flex items-center justify-center",children:[e.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v16c0 1.105.895 2 2 2h8.764a2 2 0 001.414-.586l4.586-4.586A2 2 0 0022 14.764V8c0-1.105-.895-2-2-2H6c-1.105 0-2 .895-2 2z"})}),e.jsx("span",{className:"ml-2 text-sm text-gray-500",children:n.name}),e.jsx("button",{type:"button",onClick:N,className:"ml-4 text-red-500",children:"Kaldır"})]}):e.jsx("div",{children:e.jsxs("div",{className:"flex text-sm text-gray-600",children:[e.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer rounded-md bg-white font-medium text-sky-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-sky-500",children:[e.jsx("span",{children:"Bir dosya yükleyin veya sürükleyin"}),e.jsx("input",{id:"file-upload",name:"file-upload",type:"file",required:!0,onChange:k,className:"sr-only"})]}),e.jsx("p",{className:"pl-1",children:"PNG, JPG, GIF en fazla 10MB"})]})})]})})]}),e.jsx("div",{className:"px-4 py-3 text-right sm:px-6",children:e.jsx("button",{type:"submit",className:"inline-flex justify-center rounded-md border border-transparent bg-[#0D408F] py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2",children:"Devam Et"})})]})]})}export{G as default};
